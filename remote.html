<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4CAF50">
    <title>Puzzel Remote - Ouder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            min-height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            user-select: none;
            -webkit-user-select: none;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 400px;
            width: 100%;
            margin-bottom: 15px;
        }

        h1 {
            font-size: 22px;
            color: #333;
            margin-bottom: 8px;
        }

        h2 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }

        /* Connect Screen */
        .code-input-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .code-digit {
            width: 50px;
            height: 60px;
            font-size: 28px;
            text-align: center;
            border: 3px solid #ddd;
            border-radius: 12px;
            font-weight: bold;
            color: #333;
        }

        .code-digit:focus {
            border-color: #4CAF50;
            outline: none;
        }

        .connect-btn {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .connect-btn:active {
            transform: scale(0.98);
        }

        .connect-btn:disabled {
            background: #ccc;
            box-shadow: none;
        }

        .error-msg {
            color: #f44336;
            font-size: 14px;
            margin-top: 15px;
            display: none;
        }

        /* Connected Screen */
        .connected-screen {
            display: none;
        }

        .status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            color: #4CAF50;
            font-weight: 600;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: #4CAF50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        /* Puzzle Preview */
        .puzzle-preview {
            background: #f0f0f0;
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 15px;
            position: relative;
        }

        .puzzle-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 13px;
            color: #666;
        }

        .puzzle-preview-header .puzzle-name {
            font-weight: 600;
            color: #333;
        }

        .puzzle-preview-canvas {
            width: 100%;
            aspect-ratio: 8/5;
            border-radius: 8px;
            background: #333;
            object-fit: contain;
        }

        .puzzle-preview-img {
            width: 100%;
            border-radius: 8px;
            background: #333;
        }

        .puzzle-progress-bar {
            height: 6px;
            background: #ddd;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }

        .puzzle-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.3s ease;
        }

        /* Celebration overlay in remote */
        .puzzle-complete-badge {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(76, 175, 80, 0.95);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            display: none;
            animation: celebratePop 0.5s ease;
        }

        @keyframes celebratePop {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* Main Piece Button - smaller now */
        .piece-btn {
            width: 100%;
            padding: 18px 15px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            margin-bottom: 12px;
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .piece-btn:active {
            transform: scale(0.95);
        }

        .piece-btn.success {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
        }

        .piece-btn .emoji {
            font-size: 28px;
        }

        /* Navigation Buttons */
        .nav-btn {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .nav-btn:active {
            transform: scale(0.98);
        }

        .nav-btn.tasks { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .nav-btn.settings { background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); }
        .nav-btn.puzzles { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .nav-btn.photo { background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }

        /* Photo Screen */
        .photo-screen {
            display: none;
        }

        .photo-preview-container {
            margin-bottom: 15px;
        }

        .crop-area {
            position: relative;
            width: 100%;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }

        #photo-preview {
            width: 100%;
            display: block;
        }

        .crop-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 3px dashed #4CAF50;
            box-sizing: border-box;
            pointer-events: none;
        }

        .crop-hint {
            font-size: 12px;
            color: #666;
            text-align: center;
            margin: 8px 0;
        }

        /* Photo Library */
        .photo-library {
            margin: 15px 0;
        }

        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .library-header h3 {
            margin: 0;
            font-size: 16px;
            color: #333;
        }

        .library-count {
            font-size: 12px;
            color: #666;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            max-height: 250px;
            overflow-y: auto;
            padding: 5px;
        }

        .photo-item {
            position: relative;
            aspect-ratio: 8/5;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .photo-item:hover {
            border-color: #4CAF50;
            transform: scale(1.02);
        }

        .photo-item.selected {
            border-color: #4CAF50;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.3);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-item .photo-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.6);
            color: white;
            font-size: 10px;
            padding: 3px 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .photo-item .delete-photo {
            position: absolute;
            top: 3px;
            right: 3px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(244, 67, 54, 0.9);
            color: white;
            border: none;
            font-size: 12px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .photo-item:hover .delete-photo {
            display: flex;
        }

        .empty-library {
            text-align: center;
            padding: 30px;
            color: #999;
        }

        .empty-library-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .photo-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .photo-actions button {
            padding: 12px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .add-photo-btn {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
            color: white;
            border: none;
        }

        .use-selected-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            color: white;
            border: none;
        }

        .use-selected-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .disconnect-btn {
            margin-top: 10px;
            padding: 12px 25px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            color: #666;
            cursor: pointer;
        }

        /* Settings Screen */
        .settings-screen {
            display: none;
        }

        .setting-item {
            margin-bottom: 20px;
            text-align: left;
        }

        .setting-item label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .setting-item input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 4px;
            outline: none;
        }

        .setting-item input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #4CAF50;
            border-radius: 50%;
            cursor: pointer;
        }

        .setting-item input[type="number"] {
            width: 80px;
            padding: 10px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
        }

        .setting-item select {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
        }

        /* Toggle Switch */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider-toggle {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 28px;
        }

        .slider-toggle:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .slider-toggle {
            background-color: #4CAF50;
        }

        input:checked + .slider-toggle:before {
            transform: translateX(24px);
        }

        /* Vehicle Grid */
        .vehicle-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .vehicle-btn {
            padding: 12px;
            font-size: 24px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
        }

        .vehicle-btn:active {
            transform: scale(0.95);
        }

        .vehicle-btn.selected {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        /* Settings Footer */
        .settings-footer {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .save-btn {
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            color: white;
            cursor: pointer;
        }

        .save-btn:active {
            transform: scale(0.98);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .action-btn {
            padding: 15px 10px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .action-btn.reset { background: #f44336; }
        .action-btn.next { background: #2196F3; }
        .action-btn.pause { background: #FF9800; }
        .action-btn.resume { background: #4CAF50; }

        /* Tasks Screen - Compact Bucketlist Style */
        .tasks-screen {
            display: none;
        }

        .tasks-screen h2 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .tasks-screen .subtitle {
            font-size: 12px;
            margin-bottom: 12px;
        }

        .task-categories {
            max-height: 60vh;
            overflow-y: auto;
            margin-bottom: 12px;
        }

        .category {
            margin-bottom: 8px;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            font-weight: bold;
            color: #333;
            padding: 8px 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            cursor: pointer;
        }

        .category-header:active {
            opacity: 0.9;
        }

        .category-header .toggle-icon {
            transition: transform 0.2s;
        }

        .category.open .toggle-icon {
            transform: rotate(180deg);
        }

        .category-tasks {
            display: none;
            padding: 4px 0;
        }

        .category.open .category-tasks {
            display: block;
        }

        /* Compact task items with checkboxes */
        .task-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            font-size: 13px;
            border: none;
            border-radius: 6px;
            background: white;
            color: #333;
            cursor: pointer;
            text-align: left;
            width: 100%;
            margin: 2px 0;
            transition: all 0.15s;
        }

        .task-item:active {
            background: #e8f5e9;
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            min-width: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.15s;
        }

        .task-item.completed .task-checkbox {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }

        .task-item.completed {
            background: #e8f5e9;
            color: #888;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
        }

        .task-text {
            flex: 1;
            line-height: 1.3;
        }

        .task-item.flash {
            animation: taskFlash 0.4s ease;
        }

        @keyframes taskFlash {
            0% { background: #4CAF50; color: white; }
            100% { background: white; color: #333; }
        }

        /* Completed counter per category */
        .category-count {
            background: rgba(255,255,255,0.3);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: normal;
        }

        /* Puzzles Screen */
        .puzzles-screen {
            display: none;
        }

        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-height: 50vh;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .puzzle-item {
            padding: 15px 10px;
            font-size: 12px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            text-align: center;
        }

        .puzzle-item:active {
            transform: scale(0.95);
        }

        .puzzle-item .emoji {
            font-size: 28px;
            display: block;
            margin-bottom: 5px;
        }

        /* Back Button */
        .back-btn {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
            border: 2px solid #ddd;
            border-radius: 12px;
            background: white;
            color: #666;
            cursor: pointer;
        }

        .back-btn:active {
            background: #f5f5f5;
        }

        .instructions {
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 10px;
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .instructions strong {
            color: #333;
        }

        .version-info {
            text-align: center;
            margin-top: 10px;
            font-size: 12px;
            color: rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Connect Screen -->
        <div class="card connect-screen" id="connect-screen">
            <h1>ğŸ® Puzzel Remote</h1>
            <p class="subtitle">Verbind met de tablet van je kind</p>

            <div class="code-input-container">
                <input type="tel" class="code-digit" maxlength="1" id="digit1" inputmode="numeric" pattern="[0-9]">
                <input type="tel" class="code-digit" maxlength="1" id="digit2" inputmode="numeric" pattern="[0-9]">
                <input type="tel" class="code-digit" maxlength="1" id="digit3" inputmode="numeric" pattern="[0-9]">
                <input type="tel" class="code-digit" maxlength="1" id="digit4" inputmode="numeric" pattern="[0-9]">
            </div>

            <button class="connect-btn" id="connect-btn" disabled>Verbinden</button>

            <p class="error-msg" id="error-msg"></p>

            <div class="instructions">
                <strong>Hoe werkt het?</strong><br>
                1. Open de app op de tablet<br>
                2. Lees de code linksonder op het tablet scherm<br>
                3. Voer de 4-cijferige code hier in
            </div>
        </div>

        <!-- Connected Screen (Main Menu) -->
        <div class="card connected-screen" id="connected-screen">
            <div class="status">
                <div class="status-dot"></div>
                <span>Verbonden met tablet</span>
            </div>

            <!-- Puzzle Preview -->
            <div class="puzzle-preview" id="puzzle-preview">
                <div class="puzzle-preview-header">
                    <span class="puzzle-name" id="preview-puzzle-name">ğŸ¦ Dierentuin</span>
                    <span id="preview-progress-text">0/40</span>
                </div>
                <img class="puzzle-preview-img" id="preview-img" src="" alt="Puzzel preview">
                <div class="puzzle-progress-bar">
                    <div class="puzzle-progress-fill" id="preview-progress-fill" style="width: 0%"></div>
                </div>
                <div class="puzzle-complete-badge" id="puzzle-complete-badge">ğŸ‰ Puzzel Af!</div>
            </div>

            <button class="piece-btn" id="piece-btn">
                <span class="emoji">ğŸ§©</span>
                Stukje Geven!
            </button>

            <button class="nav-btn tasks" id="show-tasks-btn">ğŸ“‹ Taken Kiezen</button>
            <button class="nav-btn settings" id="show-settings-btn">âš™ï¸ Instellingen</button>
            <button class="nav-btn puzzles" id="show-puzzles-btn">ğŸ§© Andere Puzzel</button>
            <button class="nav-btn photo" id="show-photo-btn">ğŸ“· Eigen Foto</button>

            <button class="disconnect-btn" id="disconnect-btn">Verbinding verbreken</button>
        </div>

        <!-- Photo Upload Screen -->
        <div class="card photo-screen" id="photo-screen">
            <h2>ğŸ“· Fotobibliotheek</h2>
            <p class="subtitle">Upload en beheer je eigen puzzelfoto's</p>

            <input type="file" id="photo-input" accept="image/*" style="display:none">

            <!-- Photo preview when adding new photo -->
            <div class="photo-preview-container" id="photo-preview-container" style="display:none">
                <div class="crop-area">
                    <img id="photo-preview" src="">
                    <div class="crop-overlay" id="crop-overlay"></div>
                </div>
                <p class="crop-hint">Foto wordt automatisch geschaald naar puzzelformaat</p>
                <div class="photo-actions">
                    <button class="back-btn" id="cancel-photo-btn">âœ• Annuleren</button>
                    <button class="save-btn" id="save-to-library-btn">ğŸ’¾ Opslaan in bibliotheek</button>
                </div>
            </div>

            <!-- Photo Library Grid -->
            <div class="photo-library" id="photo-library-container">
                <div class="library-header">
                    <h3>ğŸ“š Mijn Foto's</h3>
                    <span class="library-count" id="library-count">0 foto's</span>
                </div>
                <div id="photo-grid" class="photo-grid">
                    <!-- Photos will be inserted here -->
                </div>
                <div class="empty-library" id="empty-library">
                    <div class="empty-library-icon">ğŸ“·</div>
                    <p>Nog geen foto's.<br>Voeg je eerste foto toe!</p>
                </div>
            </div>

            <div class="photo-actions">
                <button class="add-photo-btn" id="add-photo-btn">â• Foto toevoegen</button>
                <button class="use-selected-btn" id="use-selected-btn" disabled>â–¶ï¸ Gebruik foto</button>
            </div>

            <button class="back-btn" id="photo-back-btn" style="margin-top: 10px;">â† Terug</button>
        </div>

        <!-- Settings Screen -->
        <div class="card settings-screen" id="settings-screen">
            <h2>âš™ï¸ Instellingen</h2>

            <div class="setting-item">
                <div class="setting-row">
                    <span>ğŸ”Š Geluid</span>
                    <label class="switch">
                        <input type="checkbox" id="sound-toggle-check" checked>
                        <span class="slider-toggle"></span>
                    </label>
                </div>
            </div>

            <div class="setting-item" id="volume-setting">
                <label>ğŸ”ˆ Volume: <span id="volume-value">50</span>%</label>
                <input type="range" id="volume-slider" min="0" max="100" value="50">
            </div>

            <div class="setting-item">
                <label>â±ï¸ Minuten per stukje: <span id="timer-value">15</span></label>
                <input type="range" id="timer-slider" min="1" max="60" value="15">
            </div>

            <div class="setting-item">
                <label>ğŸ§© Aantal stukjes:</label>
                <select id="piece-count">
                    <option value="12">12 stukjes (3x4)</option>
                    <option value="20">20 stukjes (4x5)</option>
                    <option value="30">30 stukjes (5x6)</option>
                    <option value="40" selected>40 stukjes (5x8)</option>
                    <option value="60">60 stukjes (6x10)</option>
                </select>
            </div>

            <div class="setting-item">
                <label>ğŸš— Voertuig:</label>
                <div class="vehicle-grid" id="vehicle-grid">
                    <button class="vehicle-btn selected" data-vehicle="ğŸï¸">ğŸï¸</button>
                    <button class="vehicle-btn" data-vehicle="ğŸ›µ">ğŸ›µ</button>
                    <button class="vehicle-btn" data-vehicle="ğŸšœ">ğŸšœ</button>
                    <button class="vehicle-btn" data-vehicle="âœˆï¸">âœˆï¸</button>
                    <button class="vehicle-btn" data-vehicle="ğŸš€">ğŸš€</button>
                    <button class="vehicle-btn" data-vehicle="ğŸš">ğŸš</button>
                    <button class="vehicle-btn" data-vehicle="ğŸ›¸">ğŸ›¸</button>
                    <button class="vehicle-btn" data-vehicle="ğŸš¤">ğŸš¤</button>
                </div>
            </div>

            <div class="setting-item">
                <div class="action-buttons">
                    <button class="action-btn pause" id="pause-btn">â¸ï¸ Pauze</button>
                    <button class="action-btn reset" id="reset-btn">ğŸ”„ Reset</button>
                </div>
            </div>

            <div class="settings-footer">
                <button class="back-btn" id="settings-back-btn">â† Terug</button>
                <button class="save-btn" id="settings-save-btn">âœ“ Opslaan</button>
            </div>
        </div>

        <!-- Tasks Screen -->
        <div class="card tasks-screen" id="tasks-screen">
            <h2>ğŸ“‹ Kies een Taak</h2>
            <p class="subtitle">Tik op een taak als je kind het heeft gedaan</p>

            <div class="task-categories" id="task-categories">
                <!-- Categories will be populated by JS -->
            </div>

            <button class="back-btn" id="tasks-back-btn">â† Terug</button>
        </div>

        <!-- Puzzles Screen -->
        <div class="card puzzles-screen" id="puzzles-screen">
            <h2>ğŸ§© Kies een Puzzel</h2>

            <div class="puzzle-grid" id="puzzle-grid">
                <!-- Puzzles will be populated by JS -->
            </div>

            <button class="back-btn" id="puzzles-back-btn">â† Terug</button>
        </div>

        <div class="version-info">v2.5.0</div>
    </div>

    <script src="src/js/storage.js"></script>
    <script src="src/js/firebase-config.js"></script>
    <script src="src/js/remote.js"></script>
    <script>
        // 60+ taken voor 2-jarigen tijdens een autorit
        const remoteTasks = {
            "ğŸµ Zingen & Geluid": [
                "ğŸµ Een liedje gezongen",
                "ğŸ‘ In de handen geklapt",
                "ğŸ® Koe-geluid gemaakt (boe!)",
                "ğŸ· Varken-geluid gemaakt (knor!)",
                "ğŸ¶ Hond-geluid gemaakt (waf!)",
                "ğŸ± Kat-geluid gemaakt (miauw!)",
                "ğŸ¦ Leeuw-geluid gemaakt (roar!)",
                "ğŸ¸ Kikker-geluid gemaakt (kwaak!)",
                "ğŸ¦ Vogel-geluid gemaakt (tjilp!)",
                "ğŸš— Auto-geluid gemaakt (broem!)"
            ],
            "ğŸ‘€ Kijken & Zoeken": [
                "ğŸš— Een rode auto gezien",
                "ğŸš™ Een blauwe auto gezien",
                "ğŸš• Een gele auto gezien",
                "ğŸšš Een vrachtwagen gezien",
                "ğŸšŒ Een bus gezien",
                "ğŸš’ Een brandweerauto gezien",
                "ğŸš‘ Een ambulance gezien",
                "ğŸšœ Een tractor gezien",
                "ğŸ„ Een koe gezien",
                "ğŸ‘ Een schaap gezien",
                "ğŸ´ Een paard gezien",
                "ğŸ¦† Een eend gezien",
                "ğŸ¦ Een vogel gezien",
                "ğŸŒ³ Een grote boom gezien",
                "ğŸ’§ Water gezien (sloot/rivier)",
                "ğŸŒˆ Een regenboog gezien",
                "â˜€ï¸ De zon gezien",
                "â˜ï¸ Een wolk aangewezen"
            ],
            "ğŸ¤¸ Beweging": [
                "ğŸ‘‹ Gezwaaid",
                "ğŸ‘ Duimpje omhoog gedaan",
                "âœ‹ High five gegeven",
                "ğŸ¦¶ Met voetjes gestampt",
                "ğŸ™† Armen omhoog gedaan",
                "ğŸ‘ƒ Neus aangeraakt",
                "ğŸ‘‚ Oren aangeraakt",
                "ğŸ‘€ Ogen dichtgedaan",
                "ğŸ˜› Tong uitgestoken",
                "ğŸ¤— Knuffel gegeven"
            ],
            "ğŸ”¢ Tellen & Leren": [
                "1ï¸âƒ£ Tot 3 geteld",
                "âœŒï¸ 2 vingers opgestoken",
                "ğŸ–ï¸ 5 vingers laten zien",
                "ğŸ”´ Iets roods aangewezen",
                "ğŸ”µ Iets blauws aangewezen",
                "ğŸŸ¢ Iets groens aangewezen",
                "ğŸŸ¡ Iets geels aangewezen",
                "âš« Iets zwarts aangewezen",
                "âšª Iets wits aangewezen"
            ],
            "ğŸ Eten & Drinken": [
                "ğŸ§ƒ Wat gedronken",
                "ğŸª Een koekje gegeten",
                "ğŸ Fruit gegeten",
                "ğŸ¥ª Broodje gegeten",
                "ğŸŒ Banaan gegeten"
            ],
            "ğŸ˜Š Braaf Zijn": [
                "ğŸ˜Š Lief gelachen",
                "ğŸ¤« Even stil geweest",
                "ğŸª‘ Rustig blijven zitten",
                "ğŸ‘¶ Lief geweest",
                "ğŸ˜´ Even geslapen",
                "ğŸ“– Naar een boekje gekeken",
                "ğŸ§¸ Met knuffel gespeeld",
                "ğŸ¨ Getekend/gekleurd"
            ]
        };

        // Puzzle list (matching tablet)
        const puzzleList = [
            { name: 'Dierentuin', emoji: 'ğŸ¦', color: '#87CEEB' },
            { name: 'Boerderij', emoji: 'ğŸ„', color: '#87CEEB' },
            { name: 'Kermis', emoji: 'ğŸ¡', color: '#FF69B4' },
            { name: 'Onderwaterwereld', emoji: 'ğŸ ', color: '#00CED1' },
            { name: 'Stad', emoji: 'ğŸ™ï¸', color: '#87CEEB' },
            { name: 'Supermarkt', emoji: 'ğŸ›’', color: '#FFE4B5' },
            { name: 'Speeltuin', emoji: 'ğŸ›', color: '#87CEEB' },
            { name: 'Bos', emoji: 'ğŸŒ²', color: '#228B22' },
            { name: 'Strand', emoji: 'ğŸ–ï¸', color: '#87CEEB' },
            { name: 'Ruimte', emoji: 'ğŸš€', color: '#000033' },
            { name: 'Feestje', emoji: 'ğŸ‚', color: '#FF69B4' },
            { name: 'Treinstation', emoji: 'ğŸš‚', color: '#87CEEB' },
            { name: 'Vliegveld', emoji: 'âœˆï¸', color: '#87CEEB' },
            { name: 'Camping', emoji: 'â›º', color: '#228B22' },
            { name: 'Sneeuwpret', emoji: 'â›·ï¸', color: '#B0E0E6' },
            { name: 'Jungle', emoji: 'ğŸ¦œ', color: '#228B22' },
            { name: 'Circus', emoji: 'ğŸª', color: '#FF4500' },
            { name: 'Restaurant', emoji: 'ğŸ•', color: '#FFDAB9' },
            { name: 'Muziek', emoji: 'ğŸ¸', color: '#9370DB' },
            { name: 'Tuin', emoji: 'ğŸŒ·', color: '#87CEEB' },
            { name: 'Sportveld', emoji: 'âš½', color: '#228B22' },
            { name: 'Kasteel', emoji: 'ğŸ°', color: '#87CEEB' },
            { name: 'Piraten', emoji: 'ğŸ´â€â˜ ï¸', color: '#87CEEB' },
            { name: 'Bouwplaats', emoji: 'ğŸ—ï¸', color: '#87CEEB' }
        ];
    </script>
    <script>
        // State
        let isPaused = false;
        let soundEnabled = true;

        // Elements
        const connectScreen = document.getElementById('connect-screen');
        const connectedScreen = document.getElementById('connected-screen');
        const settingsScreen = document.getElementById('settings-screen');
        const tasksScreen = document.getElementById('tasks-screen');
        const puzzlesScreen = document.getElementById('puzzles-screen');
        const photoScreen = document.getElementById('photo-screen');

        const connectBtn = document.getElementById('connect-btn');
        const errorMsg = document.getElementById('error-msg');
        const pieceBtn = document.getElementById('piece-btn');
        const disconnectBtn = document.getElementById('disconnect-btn');

        const digits = [
            document.getElementById('digit1'),
            document.getElementById('digit2'),
            document.getElementById('digit3'),
            document.getElementById('digit4')
        ];

        // Screen navigation
        function showScreen(screen) {
            connectScreen.style.display = 'none';
            connectedScreen.style.display = 'none';
            settingsScreen.style.display = 'none';
            tasksScreen.style.display = 'none';
            puzzlesScreen.style.display = 'none';
            photoScreen.style.display = 'none';
            screen.style.display = 'block';
        }

        // Track completed tasks per session
        const completedTasks = {};

        // Populate task categories with compact checkbox style
        function populateTaskCategories() {
            const container = document.getElementById('task-categories');
            container.innerHTML = '';

            for (const [categoryName, tasks] of Object.entries(remoteTasks)) {
                const categoryId = categoryName.replace(/\s/g, '_');
                completedTasks[categoryId] = completedTasks[categoryId] || new Set();

                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';
                categoryDiv.id = `cat-${categoryId}`;

                // Header with count
                const headerDiv = document.createElement('div');
                headerDiv.className = 'category-header';
                headerDiv.innerHTML = `
                    <span>${categoryName}</span>
                    <span>
                        <span class="category-count" id="count-${categoryId}">${completedTasks[categoryId].size}/${tasks.length}</span>
                        <span class="toggle-icon">â–¼</span>
                    </span>
                `;

                const tasksDiv = document.createElement('div');
                tasksDiv.className = 'category-tasks';
                tasksDiv.id = `tasks-${categoryId}`;

                tasks.forEach((task, index) => {
                    const taskId = `${categoryId}-${index}`;
                    const isCompleted = completedTasks[categoryId].has(index);

                    const taskBtn = document.createElement('button');
                    taskBtn.className = `task-item${isCompleted ? ' completed' : ''}`;
                    taskBtn.id = taskId;
                    taskBtn.innerHTML = `
                        <span class="task-checkbox">${isCompleted ? 'âœ“' : ''}</span>
                        <span class="task-text">${task}</span>
                    `;
                    taskBtn.addEventListener('click', () => toggleTask(taskBtn, categoryId, index, tasks.length));
                    tasksDiv.appendChild(taskBtn);
                });

                headerDiv.addEventListener('click', () => {
                    categoryDiv.classList.toggle('open');
                });

                categoryDiv.appendChild(headerDiv);
                categoryDiv.appendChild(tasksDiv);
                container.appendChild(categoryDiv);
            }

            // Open first category by default
            const firstCategory = container.querySelector('.category');
            if (firstCategory) firstCategory.classList.add('open');
        }

        // Toggle task completion and send piece
        async function toggleTask(btn, categoryId, taskIndex, totalTasks) {
            const wasCompleted = btn.classList.contains('completed');

            if (!wasCompleted) {
                // Mark as completed
                completedTasks[categoryId].add(taskIndex);
                btn.classList.add('completed');
                btn.querySelector('.task-checkbox').textContent = 'âœ“';
                btn.classList.add('flash');
                setTimeout(() => btn.classList.remove('flash'), 400);

                // Send piece to tablet
                try {
                    await RemoteControl.sendPiece();
                } catch (error) {
                    console.error('Verzenden mislukt:', error);
                }
            } else {
                // Uncheck (no piece sent)
                completedTasks[categoryId].delete(taskIndex);
                btn.classList.remove('completed');
                btn.querySelector('.task-checkbox').textContent = '';
            }

            // Update count
            const countEl = document.getElementById(`count-${categoryId}`);
            if (countEl) {
                countEl.textContent = `${completedTasks[categoryId].size}/${totalTasks}`;
            }
        }

        // Populate puzzle grid
        function populatePuzzleGrid() {
            const container = document.getElementById('puzzle-grid');
            container.innerHTML = '';

            puzzleList.forEach((puzzle, index) => {
                const btn = document.createElement('button');
                btn.className = 'puzzle-item';
                btn.style.background = puzzle.color;
                btn.innerHTML = `<span class="emoji">${puzzle.emoji}</span>${puzzle.name}`;
                btn.addEventListener('click', () => selectPuzzle(index));
                container.appendChild(btn);
            });
        }

        // Select a puzzle
        async function selectPuzzle(index) {
            try {
                await sendSettings({ changePuzzle: index });
                showScreen(connectedScreen);
            } catch (error) {
                alert('Fout: ' + error.message);
            }
        }

        // Send settings to tablet
        async function sendSettings(settings) {
            if (!RemoteControl.roomRef) {
                throw new Error('Niet verbonden');
            }

            await RemoteControl.roomRef.child('settings').update({
                ...settings,
                timestamp: Date.now()
            });
        }

        // Auto-focus and move between digits
        digits.forEach((digit, index) => {
            digit.addEventListener('input', (e) => {
                const value = e.target.value.replace(/\D/g, '');
                e.target.value = value.slice(-1);

                if (value && index < 3) {
                    digits[index + 1].focus();
                }

                updateConnectButton();
            });

            digit.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    digits[index - 1].focus();
                }
            });

            digit.addEventListener('paste', (e) => {
                e.preventDefault();
                const paste = (e.clipboardData || window.clipboardData).getData('text');
                const numbers = paste.replace(/\D/g, '').slice(0, 4);
                numbers.split('').forEach((num, i) => {
                    if (digits[i]) digits[i].value = num;
                });
                if (numbers.length === 4) digits[3].focus();
                updateConnectButton();
            });
        });

        function updateConnectButton() {
            const code = digits.map(d => d.value).join('');
            connectBtn.disabled = code.length !== 4;
        }

        function getCode() {
            return digits.map(d => d.value).join('');
        }

        // Connect button
        connectBtn.addEventListener('click', async () => {
            const code = getCode();
            connectBtn.disabled = true;
            connectBtn.textContent = 'Verbinden...';
            errorMsg.style.display = 'none';

            try {
                await RemoteControl.joinRoom(code);
                showScreen(connectedScreen);
                populateTaskCategories();
                populatePuzzleGrid();
            } catch (error) {
                errorMsg.textContent = error.message || 'Verbinding mislukt';
                errorMsg.style.display = 'block';
                connectBtn.disabled = false;
                connectBtn.textContent = 'Verbinden';
            }
        });

        // Send piece
        async function sendPiece(btn) {
            try {
                btn.classList.add('success');
                await RemoteControl.sendPiece();

                setTimeout(() => {
                    btn.classList.remove('success');
                }, 500);
            } catch (error) {
                alert('Verzenden mislukt: ' + error.message);
            }
        }

        pieceBtn.addEventListener('click', () => sendPiece(pieceBtn));

        // Navigation buttons
        document.getElementById('show-tasks-btn').addEventListener('click', () => {
            showScreen(tasksScreen);
        });

        document.getElementById('show-settings-btn').addEventListener('click', () => {
            showScreen(settingsScreen);
        });

        document.getElementById('show-puzzles-btn').addEventListener('click', () => {
            showScreen(puzzlesScreen);
        });

        // Back buttons
        document.getElementById('tasks-back-btn').addEventListener('click', () => {
            showScreen(connectedScreen);
        });

        document.getElementById('settings-back-btn').addEventListener('click', () => {
            showScreen(connectedScreen);
        });

        document.getElementById('puzzles-back-btn').addEventListener('click', () => {
            showScreen(connectedScreen);
        });

        // === SETTINGS STATE (temporary until saved) ===
        let pendingSettings = {};

        // Sound toggle
        document.getElementById('sound-toggle-check').addEventListener('change', (e) => {
            soundEnabled = e.target.checked;
            pendingSettings.soundEnabled = soundEnabled;
            // Show/hide volume slider based on sound enabled
            document.getElementById('volume-setting').style.opacity = soundEnabled ? '1' : '0.5';
        });

        // Volume slider
        document.getElementById('volume-slider').addEventListener('input', (e) => {
            const value = e.target.value;
            document.getElementById('volume-value').textContent = value;
            pendingSettings.volume = parseInt(value);
        });

        // Timer slider
        document.getElementById('timer-slider').addEventListener('input', (e) => {
            const value = e.target.value;
            document.getElementById('timer-value').textContent = value;
            pendingSettings.timerInterval = parseInt(value);
        });

        // Piece count
        document.getElementById('piece-count').addEventListener('change', (e) => {
            pendingSettings.pieceCount = parseInt(e.target.value);
        });

        // Vehicle grid
        document.querySelectorAll('.vehicle-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.vehicle-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                pendingSettings.vehicle = btn.dataset.vehicle;
            });
        });

        // Pause button
        document.getElementById('pause-btn').addEventListener('click', async (e) => {
            isPaused = !isPaused;
            e.target.textContent = isPaused ? 'â–¶ï¸ Doorgaan' : 'â¸ï¸ Pauze';
            e.target.className = isPaused ? 'action-btn resume' : 'action-btn pause';
            await sendSettings({ timerPaused: isPaused });
        });

        // Reset button
        document.getElementById('reset-btn').addEventListener('click', async () => {
            if (confirm('Weet je zeker dat je de puzzel wilt resetten?')) {
                await sendSettings({ resetPuzzle: true });
            }
        });

        // Save button - saves all pending settings and goes back
        document.getElementById('settings-save-btn').addEventListener('click', async () => {
            if (Object.keys(pendingSettings).length > 0) {
                await sendSettings(pendingSettings);
                pendingSettings = {};
            }
            showScreen(connectedScreen);
        });

        // Back button - discards changes and goes back
        document.getElementById('settings-back-btn').addEventListener('click', () => {
            pendingSettings = {};
            showScreen(connectedScreen);
        });

        // Disconnect
        disconnectBtn.addEventListener('click', () => {
            RemoteControl.disconnect();
            showScreen(connectScreen);
            digits.forEach(d => d.value = '');
            updateConnectButton();
            stopPuzzlePreview();
        });

        // === PUZZLE PREVIEW SYSTEM ===
        let previewInterval = null;
        let lastPuzzleState = null;

        // Start listening for puzzle state updates
        function startPuzzlePreview() {
            if (previewInterval) clearInterval(previewInterval);

            previewInterval = setInterval(() => {
                if (RemoteControl.roomRef) {
                    RemoteControl.roomRef.child('puzzleState').once('value', (snapshot) => {
                        const state = snapshot.val();
                        if (state) {
                            updatePuzzlePreview(state);
                        }
                    });
                }
            }, 1000);
        }

        function stopPuzzlePreview() {
            if (previewInterval) {
                clearInterval(previewInterval);
                previewInterval = null;
            }
        }

        // Update the preview display
        function updatePuzzlePreview(state) {
            const { puzzleIndex, piecesPlaced, totalPieces, isComplete, imageData } = state;

            // Update puzzle name
            const puzzle = puzzleList[puzzleIndex] || puzzleList[0];
            document.getElementById('preview-puzzle-name').textContent =
                `${puzzle.emoji} ${puzzle.name}`;

            // Update progress text
            document.getElementById('preview-progress-text').textContent =
                `${piecesPlaced}/${totalPieces}`;

            // Update progress bar
            const percent = totalPieces > 0 ? (piecesPlaced / totalPieces) * 100 : 0;
            document.getElementById('preview-progress-fill').style.width = `${percent}%`;

            // Update preview image
            if (imageData) {
                document.getElementById('preview-img').src = imageData;
            }

            // Show/hide completion badge
            const badge = document.getElementById('puzzle-complete-badge');
            if (isComplete) {
                badge.style.display = 'block';
                // Vibrate if supported
                if (navigator.vibrate && lastPuzzleState && !lastPuzzleState.isComplete) {
                    navigator.vibrate([200, 100, 200]);
                }
            } else {
                badge.style.display = 'none';
            }

            lastPuzzleState = state;
        }

        // Start preview when connected
        const originalConnectHandler = connectBtn.onclick;
        connectBtn.addEventListener('click', async () => {
            // Start preview after successful connection
            setTimeout(() => {
                if (connectedScreen.style.display === 'block') {
                    startPuzzlePreview();
                }
            }, 500);
        });

        // === PHOTO LIBRARY SYSTEM ===
        let pendingPhotoData = null;
        let selectedLibraryPhotoId = null;

        // Render photo library grid
        function renderPhotoLibrary() {
            const library = StorageManager.getPhotoLibrary();
            const grid = document.getElementById('photo-grid');
            const emptyMsg = document.getElementById('empty-library');
            const countEl = document.getElementById('library-count');
            const useBtn = document.getElementById('use-selected-btn');

            countEl.textContent = `${library.length} foto's`;

            if (library.length === 0) {
                grid.style.display = 'none';
                emptyMsg.style.display = 'block';
                useBtn.disabled = true;
                return;
            }

            grid.style.display = 'grid';
            emptyMsg.style.display = 'none';

            grid.innerHTML = library.map(photo => `
                <div class="photo-item ${selectedLibraryPhotoId === photo.id ? 'selected' : ''}" data-id="${photo.id}">
                    <img src="${photo.data}" alt="${photo.name}">
                    <div class="photo-name">${photo.name}</div>
                    <button class="delete-photo" data-id="${photo.id}">âœ•</button>
                </div>
            `).join('');

            // Add click handlers for selection
            grid.querySelectorAll('.photo-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    if (e.target.classList.contains('delete-photo')) return;
                    const id = item.dataset.id;
                    selectedLibraryPhotoId = (selectedLibraryPhotoId === id) ? null : id;
                    renderPhotoLibrary();
                });
            });

            // Add click handlers for delete buttons
            grid.querySelectorAll('.delete-photo').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const id = btn.dataset.id;
                    if (confirm('Weet je zeker dat je deze foto wilt verwijderen?')) {
                        StorageManager.removePhoto(id);
                        if (selectedLibraryPhotoId === id) {
                            selectedLibraryPhotoId = null;
                        }
                        renderPhotoLibrary();
                    }
                });
            });

            useBtn.disabled = !selectedLibraryPhotoId;
        }

        // Process image to correct aspect ratio
        function processImage(file, callback) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const img = new Image();
                img.onload = () => {
                    const targetRatio = 8 / 5;
                    let cropWidth = img.width;
                    let cropHeight = img.height;
                    let offsetX = 0;
                    let offsetY = 0;

                    const imgRatio = img.width / img.height;
                    if (imgRatio > targetRatio) {
                        cropWidth = img.height * targetRatio;
                        offsetX = (img.width - cropWidth) / 2;
                    } else {
                        cropHeight = img.width / targetRatio;
                        offsetY = (img.height - cropHeight) / 2;
                    }

                    const canvas = document.createElement('canvas');
                    canvas.width = 800;
                    canvas.height = 500;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, offsetX, offsetY, cropWidth, cropHeight, 0, 0, 800, 500);

                    callback(canvas.toDataURL('image/jpeg', 0.85));
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        }

        // Show photo screen
        document.getElementById('show-photo-btn').addEventListener('click', () => {
            showScreen(photoScreen);
            renderPhotoLibrary();
        });

        // Back from photo screen
        document.getElementById('photo-back-btn').addEventListener('click', () => {
            document.getElementById('photo-preview-container').style.display = 'none';
            document.getElementById('photo-library-container').style.display = 'block';
            showScreen(connectedScreen);
        });

        // Add photo button - trigger file input
        document.getElementById('add-photo-btn').addEventListener('click', () => {
            document.getElementById('photo-input').click();
        });

        // Handle file selection
        document.getElementById('photo-input').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            processImage(file, (imageData) => {
                pendingPhotoData = imageData;
                document.getElementById('photo-preview').src = imageData;
                document.getElementById('photo-preview-container').style.display = 'block';
                document.getElementById('photo-library-container').style.display = 'none';
            });

            // Reset input so same file can be selected again
            e.target.value = '';
        });

        // Cancel adding photo
        document.getElementById('cancel-photo-btn').addEventListener('click', () => {
            pendingPhotoData = null;
            document.getElementById('photo-preview-container').style.display = 'none';
            document.getElementById('photo-library-container').style.display = 'block';
        });

        // Save photo to library
        document.getElementById('save-to-library-btn').addEventListener('click', () => {
            if (!pendingPhotoData) return;

            const name = prompt('Naam voor deze foto:', `Foto ${StorageManager.getPhotoLibrary().length + 1}`);
            if (name === null) return; // User cancelled

            const photo = StorageManager.addPhoto(pendingPhotoData, name || undefined);
            if (photo) {
                pendingPhotoData = null;
                document.getElementById('photo-preview-container').style.display = 'none';
                document.getElementById('photo-library-container').style.display = 'block';
                selectedLibraryPhotoId = photo.id; // Auto-select new photo
                renderPhotoLibrary();
            }
        });

        // Use selected photo as puzzle
        document.getElementById('use-selected-btn').addEventListener('click', async () => {
            if (!selectedLibraryPhotoId) return;

            const photo = StorageManager.getPhoto(selectedLibraryPhotoId);
            if (!photo) return;

            try {
                await sendSettings({ customImage: photo.data });
                alert(`Foto "${photo.name}" wordt nu als puzzel geladen!`);
                showScreen(connectedScreen);
            } catch (error) {
                alert('Fout bij verzenden: ' + error.message);
            }
        });

        // Focus first digit on load
        digits[0].focus();
    </script>
</body>
</html>
